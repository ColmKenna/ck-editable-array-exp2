<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Read-only Mode - ck-editable-array</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <a href="index.html" class="back-link">‚Üê Back to Examples</a>
      <h1>Read-only Mode</h1>
      <p class="subtitle">Component in viewing mode with editing disabled.</p>
    </header>

    <div class="card">
      <div class="warning-box">
        <strong>Note:</strong> Attempting to add, edit, or delete items should be blocked when <code>readonly</code> attribute is present.
      </div>
      
      <div class="mb-4 flex-row justify-end">
         <button id="addBtn" class="demo-btn btn-disabled" disabled>Add Item (Disabled)</button>
      </div>

      <!-- Note: readonly attribute is set here -->
      <ck-editable-array id="readonlyList" readonly>
        <template data-slot="display">
          <link rel="stylesheet" href="styles.css">
          <div class="row-item bordered">
             <div class="avatar">#</div>
             <div class="grow">
               <div style="font-weight: 600;" data-bind="title"></div>
               <div class="text-sm text-muted" data-bind="status"></div>
             </div>
             <!-- Toggle button might render but should not work or be hidden by CSS if customized -->
             <!-- ck-editable-array default behavior: Add toggle button if missing. But if readonly, enterEditMode returns early. -->
          </div>
        </template>
        
        <!-- Edit template provided but shouldn't be accessible -->
        <template data-slot="edit">
            <link rel="stylesheet" href="styles.css">
            <div style="border: 1px solid red; padding: 1rem;">
                This should not be seen!
                <input data-bind="title">
                <button data-action="save">Save</button>
            </div>
        </template>
      </ck-editable-array>
    </div>

    <div class="card">
        <label class="flex-row gap-2" style="cursor: pointer; width: auto;">
            <input type="checkbox" id="toggleReadonly" checked>
            Enable Read-only Mode
        </label>
    </div>
  </div>

  <script type="module">
    import '../dist/ck-editable-array/ck-editable-array.esm.js';

    const list = document.getElementById('readonlyList');
    const toggle = document.getElementById('toggleReadonly');
    const addBtn = document.getElementById('addBtn');

    list.data = [
      { title: 'Project Alpha', status: 'Completed' },
      { title: 'Project Beta', status: 'In Progress' },
      { title: 'Project Gamma', status: 'Pending' }
    ];

    addBtn.addEventListener('click', () => {
        console.log('Trying to add row...');
        list.addRow(); // Should do nothing if readonly
    });

    toggle.addEventListener('change', (e) => {
        list.readonly = e.target.checked;
        
        // Update Add button UI state for clarity (though component blocks logic internally)
        if(list.readonly) {
            addBtn.disabled = true;
            addBtn.style.opacity = '0.5';
            addBtn.style.cursor = 'not-allowed';
            addBtn.style.background = '#9ca3af';
            addBtn.textContent = 'Add Item (Disabled)';
        } else {
            addBtn.disabled = false;
            addBtn.style.opacity = '1';
            addBtn.style.cursor = 'pointer';
            addBtn.style.background = '#2563eb';
            addBtn.textContent = 'Add Item';
        }
    });
  </script>
</body>
</html>
