<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Read-only Mode - ck-editable-array</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <a href="index.html" class="back-link">‚Üê Back to Examples</a>
      <h1>Read-only Mode</h1>
      <p class="subtitle">Component in viewing mode with editing disabled.</p>
    </header>

    <div class="card">
      <div style="margin-bottom: 1rem; padding: 1rem; background: #fffbeb; border: 1px solid #fcd34d; border-radius: 0.5rem; color: #92400e;">
        <strong>Note:</strong> Attempting to add, edit, or delete items should be blocked when <code>readonly</code> attribute is present.
      </div>
      
      <div style="margin-bottom: 1rem; display: flex; justify-content: flex-end;">
         <button id="addBtn" class="demo-btn" disabled style="opacity: 0.5; cursor: not-allowed; background: #9ca3af;">Add Item (Disabled)</button>
      </div>

      <!-- Note: readonly attribute is set here -->
      <ck-editable-array id="readonlyList" readonly>
        <template data-slot="display">
          <div style="display: flex; gap: 1rem; align-items: center; width: 100%; border-bottom: 1px solid #eee; padding: 0.5rem 0;">
             <div style="width: 2rem; height: 2rem; background: #e5e7eb; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #6b7280;">#</div>
             <div style="flex-grow: 1;">
               <div style="font-weight: 600;" data-bind="title"></div>
               <div style="color: #666; font-size: 0.9em;" data-bind="status"></div>
             </div>
             <!-- Toggle button might render but should not work or be hidden by CSS if customized -->
             <!-- ck-editable-array default behavior: Add toggle button if missing. But if readonly, enterEditMode returns early. -->
          </div>
        </template>
        
        <!-- Edit template provided but shouldn't be accessible -->
        <template data-slot="edit">
            <div style="border: 1px solid red; padding: 1rem;">
                This should not be seen!
                <input data-bind="title">
                <button data-action="save">Save</button>
            </div>
        </template>
      </ck-editable-array>
    </div>

    <div class="card">
        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
            <input type="checkbox" id="toggleReadonly" checked>
            Enable Read-only Mode
        </label>
    </div>
  </div>

  <script type="module">
    import '../dist/ck-editable-array/ck-editable-array.esm.js';

    const list = document.getElementById('readonlyList');
    const toggle = document.getElementById('toggleReadonly');
    const addBtn = document.getElementById('addBtn');

    list.data = [
      { title: 'Project Alpha', status: 'Completed' },
      { title: 'Project Beta', status: 'In Progress' },
      { title: 'Project Gamma', status: 'Pending' }
    ];

    addBtn.addEventListener('click', () => {
        console.log('Trying to add row...');
        list.addRow(); // Should do nothing if readonly
    });

    toggle.addEventListener('change', (e) => {
        list.readonly = e.target.checked;
        
        // Update Add button UI state for clarity (though component blocks logic internally)
        if(list.readonly) {
            addBtn.disabled = true;
            addBtn.style.opacity = '0.5';
            addBtn.style.cursor = 'not-allowed';
            addBtn.style.background = '#9ca3af';
            addBtn.textContent = 'Add Item (Disabled)';
        } else {
            addBtn.disabled = false;
            addBtn.style.opacity = '1';
            addBtn.style.cursor = 'pointer';
            addBtn.style.background = '#2563eb';
            addBtn.textContent = 'Add Item';
        }
    });
  </script>
</body>
</html>
