<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Basic Example - ck-editable-array</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 900px;
      margin: 2rem auto;
      padding: 0 1rem;
      background: #f5f5f5;
    }

    .header {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      margin-bottom: 2rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    h1 {
      margin: 0 0 0.5rem 0;
      color: #2c3e50;
    }

    .subtitle {
      color: #7f8c8d;
      margin: 0;
    }

    .card {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .controls {
      margin-bottom: 1.5rem;
      display: flex;
      justify-content: flex-end;
    }

    .btn {
      padding: 0.6rem 1.25rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.2s;
    }

    .btn-primary {
      background: #3498db;
      color: white;
    }

    .btn-primary:hover {
      background: #2980b9;
    }

    .btn-success {
      background: #27ae60;
      color: white;
    }

    .btn-success:hover {
      background: #229954;
    }

    .btn-danger {
      background: #e74c3c;
      color: white;
    }

    .btn-danger:hover {
      background: #c0392b;
    }

    .btn-secondary {
      background: #95a5a6;
      color: white;
    }

    .btn-secondary:hover {
      background: #7f8c8d;
    }

    /* Styles for templates */
    .row-display {
      display: flex;
      align-items: center;
      padding: 1rem;
      border: 1px solid #ecf0f1;
      border-radius: 4px;
      margin-bottom: 0.5rem;
      background: #fff;
    }

    .row-content {
      flex: 1;
    }

    .row-actions {
      display: flex;
      gap: 0.5rem;
    }

    .row-edit {
      padding: 1.5rem;
      border: 2px solid #3498db;
      border-radius: 4px;
      margin-bottom: 0.5rem;
      background: #f8f9fa;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .form-label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.25rem;
      color: #2c3e50;
    }

    .form-input {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 1rem;
    }

    .form-input:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .edit-actions {
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
      margin-top: 1rem;
    }

    .output {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 1rem;
      border-radius: 4px;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
    }

    .back-link {
      display: inline-block;
      margin-bottom: 1rem;
      color: #3498db;
      text-decoration: none;
    }

    .back-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <a href="ck-editable-array-help.html" class="back-link">‚Üê Back to Documentation</a>

  <div class="header">
    <h1>Basic Example</h1>
    <p class="subtitle">Simple CRUD operations with ck-editable-array</p>
  </div>

  <div class="card">
    <div class="controls">
      <button id="addBtn" class="btn btn-primary">Add User</button>
    </div>

    <ck-editable-array id="userList" name="users">
      <template data-slot="display">
        <div class="row-display">
          <div class="row-content">
            <strong data-bind="name"></strong>
            <span style="margin-left: 1rem; color: #7f8c8d;" data-bind="email"></span>
          </div>
          <div class="row-actions">
            <button data-action="toggle" class="btn btn-secondary">Edit</button>
            <button data-action="delete" class="btn btn-danger">Delete</button>
          </div>
        </div>
      </template>

      <template data-slot="edit">
        <div class="row-edit">
          <div class="form-group">
            <label class="form-label">Name:</label>
            <input type="text" data-bind="name" class="form-input" placeholder="Enter name">
          </div>
          <div class="form-group">
            <label class="form-label">Email:</label>
            <input type="email" data-bind="email" class="form-input" placeholder="Enter email">
          </div>
          <div class="edit-actions">
            <button data-action="cancel" class="btn btn-secondary">Cancel</button>
            <button data-action="save" class="btn btn-success">Save</button>
          </div>
        </div>
      </template>
    </ck-editable-array>
  </div>

  <div class="card">
    <h2 style="margin-top: 0;">Current Data</h2>
    <pre id="output" class="output">[]</pre>
  </div>

  <div class="card">
    <h2 style="margin-top: 0;">How It Works</h2>
    <ol>
      <li><strong>Add:</strong> Click "Add User" to create a new row in edit mode</li>
      <li><strong>Edit:</strong> Click "Edit" on any row to enter edit mode</li>
      <li><strong>Save:</strong> Click "Save" to commit changes</li>
      <li><strong>Cancel:</strong> Click "Cancel" to discard changes and restore original data</li>
      <li><strong>Delete:</strong> Click "Delete" to soft-delete a row (adds deleted flag)</li>
    </ol>
  </div>

  <!-- Load the component -->
  <script type="module">
    // In a real application, you would import from npm or CDN:
    // import '@colmkenna/ck-webcomponents';

    // For this example, we'll load from the dist folder
    import '../dist/ck-editable-array/ck-editable-array.esm.js';
  </script>

  <script type="module">
    const list = document.getElementById('userList');
    const addBtn = document.getElementById('addBtn');
    const output = document.getElementById('output');

    // Set initial data
    list.data = [
      { name: 'Alice Johnson', email: 'alice@example.com' },
      { name: 'Bob Smith', email: 'bob@example.com' },
      { name: 'Carol Williams', email: 'carol@example.com' }
    ];

    // Configure factory for new items
    list.newItemFactory = () => ({
      name: '',
      email: ''
    });

    // Handle add button
    addBtn.addEventListener('click', () => {
      list.addRow();
    });

    // Listen for data changes and update output
    list.addEventListener('datachanged', (e) => {
      output.textContent = JSON.stringify(e.detail.data, null, 2);
    });

    // Log lifecycle events to console
    list.addEventListener('beforetogglemode', (e) => {
      console.log('Before toggle mode:', e.detail);
    });

    list.addEventListener('aftertogglemode', (e) => {
      console.log('After toggle mode:', e.detail);
    });

    // Initial output display
    output.textContent = JSON.stringify(list.data, null, 2);
  </script>
</body>
</html>